@using EntityLayer.Concrete
@model Admin
@{
    ViewBag.Title = "Settings";
    Layout = "~/Views/Shared/_AdminLayout.cshtml";
}

<h2>Ayarlar</h2>
@using (Html.BeginForm("Settings", "Admin", FormMethod.Post, new { id = "settingsform", onsubmit = "formSubmit()" }))
{
    <div>
        @Html.HiddenFor(model => model.AdminPassword)
    </div>
    <div class="mt-3">
        <label>Eski Şifre</label>
        <input class="form-control" name="oldPw" type="password">
    </div>
    <div class="mt-3">
        <label>Yeni Şifre</label>
        <input class="form-control" name="newPw1" type="password">
    </div>
    <div class="mt-3">
        <label>Yeni Şifre (tekrar)</label>
        <input class="form-control" name="newPw2" type="password">
    </div>
    <button class="btn btn-primary mt-4" type="submit">Güncelle</button>
}
<div class="alert alert-success collapse mt-5" role="alert" id="myAlert">
    Şifre başarıyla güncellendi.
</div>

<script type="text/javascript">
    function formSubmit() {
        var current = document.getElementById("AdminPassword").value;
        var oldPassword = document.getElementsByName("oldPw")[0].value;
        var newPassword1 = document.getElementsByName("newPw1")[0].value;
        var newPassword2 = document.getElementsByName("newPw2")[0].value;
        if (current == oldPassword && newPassword1 == newPassword2) {
            alert("Başarıyla güncellendi");
        }
        else alert("Şifre güncellenemedi!");
    }
</script>


